!function(){"use strict";const e=new WeakMap,t=t=>{if(e.has(t))return;if(8!==t.querySelectorAll("select, button, a.module_link, img.module_image").length)return;e.set(t,!0);const l=t.closest("tbody"),n=e=>{Array.from(e.children).forEach(((e,t)=>{e.querySelectorAll("input, select").forEach((e=>{e.name=e.name.replace(/\[[0-9]+]/g,"["+t+"]")}))})),new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){n(e)}})},r=e=>{e.querySelectorAll("button").forEach((t=>{switch(t.dataset.command){case"copy":t.addEventListener("click",(()=>{Backend.getScrollOffset();const t=e.cloneNode(!0),c=e.querySelectorAll("select"),o=t.querySelectorAll("select");for(let e=0;e<c.length;e++)o[e].value=c[e].value;e.parentNode.insertBefore(t,e.nextSibling),t.querySelector(".chzn-container").remove(),new Chosen(t.querySelector("select.tl_select")),r(t),n(l)}));break;case"delete":t.addEventListener("click",(()=>{Backend.getScrollOffset(),l.children.length>1?e.remove():e.querySelectorAll("select").forEach((e=>{e.value=e.children[0].value})),n(l)}));break;case"enable":t.addEventListener("click",(function(){Backend.getScrollOffset();const e=t.previousElementSibling;e.checked?e.checked="":e.checked="checked"}));break;default:t.classList.contains("drag-handle")&&t.addEventListener("keydown",(r=>{"ArrowUp"===r.code||38===r.keyCode?(r.preventDefault(),e.previousElementSibling?e.previousElementSibling.insertAdjacentElement("beforebegin",e):l.insertAdjacentElement("beforeend",e),t.focus(),n(l)):"ArrowDown"!==r.code&&40!==r.keyCode||(r.preventDefault(),e.nextElementSibling?e.nextElementSibling.insertAdjacentElement("afterend",e):l.insertAdjacentElement("afterbegin",e),t.focus(),n(l))}))}}));const t=e.querySelector("td:first-child select");if(!t)return;const c=e.querySelector("a.module_link"),o=e.querySelector("img.module_image"),a=()=>{c.href=c.href.replace(/id=[0-9]+/,"id="+t.value),t.value>0?(c.style.display=null,o.style.display="none"):(c.style.display="none",o.style.display=null)};t.addEventListener("change",a),t.addEvent("change",a)};n(l),r(t)};document.querySelectorAll(".tl_modulewizard tr").forEach(t),new MutationObserver((function(e){for(const l of e)"childList"===l.type&&l.addedNodes.forEach((function(e){e.matches&&e.matches(".tl_modulewizard tr, .tl_modulewizard tr *")&&t(e.closest("tr"))}))})).observe(document,{attributes:!1,childList:!0,subtree:!0})}();