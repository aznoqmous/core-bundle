{% extends "@Contao/content_element/_base.html.twig" %}

{% set highlighter_css_file = 'vendor/scrivo/highlight_php/styles/foundation.css' %}

{% block content %}
    {% if as_editor_view %}
        {% block editor_view %}<pre>{{ code }}</pre>{% endblock %}
    {% else %}
        {% block highlighted %}
            {% block style %}
                {% add "highlighter_css" to head %}
                    {% include "@Contao/component/_stylesheet.html.twig" with {file: highlighter_css_file} %}
                {% endadd %}
            {% endblock %}

            {% block code %}
                {# @var \Contao\CoreBundle\Twig\Runtime\HighlightResult highlighted #}
                {% set highlighted = code|highlight(language) %}
                <pre><code{% block code_attributes %}{{ attrs(code_attributes|default).addClass('hljs', highlighted.language) }}{% endblock %}>
                    {{- highlighted.value|raw -}}
                </code></pre>
            {% endblock %}
        {% endblock %}
    {% endif -%}
{% endblock %}
