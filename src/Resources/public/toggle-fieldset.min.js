window.addEventListener("DOMContentLoaded",(function(){const e=function(e,t,l){fetch(window.location.href,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({action:"toggleFieldset",id:e,table:t,state:l,REQUEST_TOKEN:Contao.request_token})})},t=function(t,l,o){t.blur(),Backend.getScrollOffset();const s=t.parentNode;if(s.classList.contains("collapsed"))s.classList.remove("collapsed"),e(l,o,1);else{const t=s.closest("form"),a=s.querySelectorAll("[required]");let n=!0;for(let e=0;e<a.length;e++)if(!a[e].value){n=!1;break}n?(s.classList.add("collapsed"),e(l,o,0)):"function"==typeof t.checkValidity&&t.querySelector('button[type="submit"]').click()}};document.querySelectorAll("legend[data-toggle-fieldset]").forEach((function(e){const l=e.parentNode;l.querySelectorAll("label.error, label.mandatory").length?l.classList.remove("collapsed"):l.classList.contains("hide")&&l.classList.add("collapsed");const{id:o,table:s}=JSON.parse(e.getAttribute("data-toggle-fieldset"));e.addEventListener("click",(function(l){l.preventDefault(),t(e,o,s)}))})),AjaxRequest.toggleFieldset=function(e,l,o){window.console&&console.warn("Using AjaxRequest.toggleFieldset is deprecated and will be removed in Contao 6. Add the data-toggle-fieldset attribute instead."),t(e,l,o)}}));